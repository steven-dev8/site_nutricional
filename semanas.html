<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semanas</title>
    <link rel="stylesheet" href="css/tabela_diaria.css">
    <script>
    function dimensaoTela(){
        var heightTela = window.innerHeight;
        var widthTela = window.innerWidth;

        document.getElementById('pag_processos').style.minHeight = heightTela+'px';
}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body  id="pag_processos" onload="dimensaoTela()">
    <header>
        <div class="logo">
            <img src="assets/image/logo_apenas_imagem.png" alt="logo" class="img_logo">
        </div>
    </header>
    <div class="container">
        <table class="adicionar">
            <tr>
                <td><input type="checkbox" class="refeicao" value="primeira"> 1ª REFEIÇÃO</td>
                <td><input type="checkbox" class="refeicao" value="segunda"> 2ª REFEIÇÃO</td>
                <td><input type="checkbox" class="refeicao" value="terceira"> 3ª REFEIÇÃO</td>
                <td><input type="checkbox" class="refeicao" value="quarta"> 4ª REFEIÇÃO</td>
            </tr>

            <tr>
                <td colspan="4" text-align="center"><button class="botao" onclick="addRefeicao()">Adicionar</button> <button class="botao">Voltar</button></td>
            </tr>
        </table>

        <table class="refeicoes">
            <caption>Refeições do dia</caption>
            <tr>
                <td>REFEIÇÕES</td> <td>CARBOIDRATOS</td> <td>PROTEÍNAS</td> <td>GORDURAS</td>
            </tr>
            <tr>
                <td>1ª REFEIÇÃO</td> <td id="carbo1"></td> <td id="prot1"></td> <td id="gord1"></td>
            </tr>
            <tr>
                <td>2ª REFEIÇÃO</td> <td id="carbo2"></td> <td id="prot2"></td> <td id="gord2"></td>
            </tr>
            <tr>
                <td>3ª REFEIÇÃO</td> <td id="carbo3"></td> <td id="prot3"></td> <td id="gord3"></td>
            </tr>
            <tr>
                <td>4ª REFEIÇÃO</td> <td id="carbo4"></td> <td id="prot4"></td> <td id="gord4"></td>
            </tr>
        </table>
    </div>

    <script>
        const alimentos = {
            'Arroz branco': { carboidratos: 28.2, proteinas: 2.7, gorduras: 0.3 },
            'Feijão': { carboidratos: 20.0, proteinas: 9.0, gorduras: 0.5 },
            'Pão francês': { carboidratos: 50.0, proteinas: 9.0, gorduras: 2.5 },
            'Laranja': { carboidratos: 11.75, proteinas: 0.94, gorduras: 0.12 },
            'Carne Bovina': { carboidratos: 0.0, proteinas: 26.0, gorduras: 20.0 },
            'Carne de Frango': { carboidratos: 0.0, proteinas: 31.0, gorduras: 3.6 },
            'Ovo': { carboidratos: 0.73, proteinas: 13.0, gorduras: 10.0 },
            'Café': { carboidratos: 0.0, proteinas: 0.0, gorduras: 0.0 },
            'Banana': { carboidratos: 22.84, proteinas: 1.09, gorduras: 0.33 },
            'Batata Branca': { carboidratos: 17.58, proteinas: 2.02, gorduras: 0.1 }
        };

        const valores = new URLSearchParams(window.location.search)
        let dados = {}
        valores.forEach((value, key) => {
            dados[key] = value
        })

        info = {carboidrato: 0, proteina: 0, gordura: 0}

        Object.keys(dados).forEach(key => {
    if (alimentos[key]) {
        info.carboidrato += alimentos[key].carboidratos;
        info.proteina += alimentos[key].proteinas;
        info.gordura += alimentos[key].gorduras;
    }
});

        console.log(info)


        function addRefeicao() {
            let valoresMarcados = [];
                
            $('input[type="checkbox"]:checked').each(function() {
                valoresMarcados.push($(this).val());
            });

            if (valoresMarcados.includes('primeira')){
                $('#carbo1').text(`${info.carboidrato}g`);
                $('#prot1').text(`${info.proteina}g`);
                $('#gord1').text(`${info.gordura}g`);
            }
            if (valoresMarcados.includes('segunda')){
                $('#carbo2').text(`${info.carboidrato}g`);
                $('#prot2').text(`${info.proteina}g`);
                $('#gord2').text(`${info.gordura}g`);
            }
            if (valoresMarcados.includes('terceira')){
                $('#carbo3').text(`${info.carboidrato}g`);
                $('#prot3').text(`${info.proteina}g`);
                $('#gord3').text(`${info.gordura}g`);
            }
            if (valoresMarcados.includes('quarta')){
                $('#carbo4').text(`${info.carboidrato}g`);
                $('#prot4').text(`${info.proteina}g`);
                $('#gord4').text(`${info.gordura}g`);
            }
    }
    </script>

    <div class="container2">
        <table>
        <td>
        Carboidratos: <input type="text" id="calorias">
        Gordura: <input type="text id="gordura">
        Proteínas: <input type="text" id="proteina">
        </td>
        </table>

        <button class="botao2">Adicionar dia a semana</button>

        <div class="grafico">
            <canvas id="metas"></canvas>
        </div>
    </div>
    <footer><p>© aNutriLife - Since 2024</p></footer>
    <script>
        const ctx = $('#metas');

new Chart(ctx, {
    type: 'line', // Gráfico de linha
    data: {
        labels: ['Dia 1', 'Dia 2', 'Dia 3'], // Rótulos para o eixo x
        datasets: [
            {
                label: 'Carboidratos(g)', 
                data: [], // Apenas o valor para "Carboidratos"
                borderColor: '#6fe904',
                backgroundColor: 'rgba(111, 233, 4, 0.2)',
                tension: 0.4, // Curvatura da linha
                fill: false
            },
            {
                label: 'Proteínas(g)', 
                data: [], // Apenas o valor para "Proteínas"
                borderColor: '#608E37',
                backgroundColor: 'rgba(96, 142, 55, 0.2)',
                tension: 0.4,
                fill: false
            },
            {
                label: 'Gorduras(g)', 
                data: [], // Apenas o valor para "Gorduras"
                borderColor: '#36521f',
                backgroundColor: 'rgba(54, 82, 31, 0.2)',
                tension: 0.4,
                fill: false
            },
        ],
    },
    options: {
        responsive: true,
        plugins: {
            legend: { position: 'top' },
            title: { display: true, text: 'METAS' }
        },
        scales: {
            y: {
                beginAtZero: true // Começa no zero para melhor visualização
            }
        }
    }
});


    </script>
</body>
</html>
